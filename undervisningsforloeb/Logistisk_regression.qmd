---
title: "Logistisk regression"
description-meta: 'Et længere forløb om logistisk regression som supplerende stof på A-niveau inklusiv spørgsmål til mundtlig eksamen'
image: "logistiskgression_filer/images/logklas.png"

format:
    html: 
      self-contained: true
      toc: true
      toc-title: Indhold
      toc-location: left
      link-external-newwindow: true
from: markdown+emoji
reference-location: margin
categories:
  - A-niveau
crossref:
  fig-prefix: figur   # (default is "Figure")
  tbl-prefix: tabel    # (default is "Table")
  exm-prefix: eksempel
  thm-prefix: sætning
  sec-prefix: afsnit
  eq-prefix: ''
  fig-title: Figur
  exm-title: Eksempel
  thm-title: Sætning
  tbl-title: Tabel
label:
    fig: Figur
fig-cap-location: margin
tab-cap-location: margin
tbl-cap-location: margin
execute:
  echo: false
  warning: false
---


::: {.callout collapse="true" appearance="minimal"}
### Forudsætninger og tidsforbrug
Forløbet kræver kendskab til:

+ Logistisk vækst
+ Invers funktion
+ Den naturlige logaritme


**Tidsforbrug:** 10-12 timer.

:::

::: {.purpose}

### Formål

I dette længere forløb skal du lære om logistisk regression, som er en metode indenfor kunstig intelligens, som ikke er black-box som f.eks. neurale netværk er. 

Forløbet indeholder bl.a. et forslag til et spørgsmål til mundtlig eksamen, og kan derfor dække kravet på Stx A om, at mindst ét spørgsmål skal stilles med udgangspunkt i det supplerende stof.

:::

## Introduktion
Dette forløb anvender i stor udstrækning følgende materiale
[Logistisk regression](../materialer/logistisk/log-reg.qmd){target="_blank"} .

Forløbet er inddelt i 6 dele + et eksamensspørgsmål med en cirka tidsangivelse til hver del.

Til sidst er der en kort lærervejledning, som elever kan ignorere.

## Del 1 - logistisk regression
Forventet tid ca. 90 min.

* Læs afsnittet Logistisk regression og hjerte-kar-sygdom i materialet.
* Hent Excelfilen med de 2000 datapunkter.
* Genskab figur 1 i materialet ud fra de første 100 punkter og overvej, hvorfor det er en dårlig ide at bruge alle 2000 punkter.
* Inddel de 2000 datapunkter i intervaller som vist i tabel 1 i materialet. Dette kan f.eks. gøres vha. pivottabel i Excel som beskrevet nedenfor.
* Lav lineær regression ud fra data i tabel 1 og genskab derved figur 3. Husk at bruge midtpunktet af hvert interval.

::: {.callout-note collapse="true" appearance="minimal"}

## Del 1 - hjælp til Pivottabel i Excel
Hent Excel filen med de 2000 datapunkter, og ændr overskrifterne til Blodtryk og Syg

Vælg "Indsæt pivottabel" i Excel og vælg dataområde og placering

![](logistiskregression_filer/pivottabel1.png)

Indstil pivottabellen

![](logistiskregression_filer/pivottabel2.png)

Højreklik på én af værdierne for blodtryk i pivottabellen, vælg "Grupper" og vælg indstillinger for intervallerne.

![](logistiskregression_filer/pivottabel3.png)

Herefter skal det se således ud:

![](logistiskregression_filer/pivottabel4.png)

:::

## Del 2 - Odds og første bevis
Forventet tid ca. 90 min

* Læs afsnittet "Odds" i materialet.
* Lav de tilhørende opgaver i materialet, dog ikke bonus opgaven.
* Lærergennemgang af, at $O(p)$ er voksende vha. differentiation og monotoni.

## Del 3 - Den logistiske regressionsmodel
Forventet tid ca. 45 min

* Læs afsnittet "Den logistiske regressionsmodel" i materialet.
* Lav de tilhørende opgaver i materialet.


## Del 4 - Logit og andet bevis
Forventet tid ca. 60 min

* Repetition af, hvad en invers funktion er.
* Læs afsnittet i materialet med fokus på at kunne isolere $p(x)$ i $logit(x)$.


## Del 5 - Fortolkning
Forventet tid ca. 60 min

* Læs det meste af afsnittet "Fortolkning af parametrene i den logistiske regressionsmodel" i materialet. Stop efter eksemplet, der ender med en vækst på 22%.
* Lav de tilhørende opgaver i materialet.


## Del 6 - Maximum Likelihood Estimation
Forventet tid ca. 120 min

* Lærergennemgang af teorien.
* Læs derefter afsnittet "Bestemmelse af a og b med Excels problemløser-værktøj" i materialet.
* Anvend igen Excel arket med de 2000 datapunkter, og benyt problemløsning i Excel til at vise, at $a=0,022$ og $b=-3,9$ optimerer løsningen.
* Lav de tilhørende opgaver i materialet.

## Eksamensspørgsmål: Differentialregning og logistisk regression
Forventet tid ca. 90 min

Differentialregning og logistisk regression

* Forklar om logistisk regression, herunder odds.
* Differentier $O(x)= {p \over (1-p)}$ og vis derved, at $O(x)$ er voksende.
*	Isolerer $p(x)$ i $logit(p)$.

::: {.callout-note collapse="true" appearance="minimal"}

## Til læreren
I del 1 kan inddelingen i intervaller givet også ske i eleverne eget CAS værktøj, hvis det foretrækkes. Der kan dog evt. være en pointe i at lade eleverne stifte bekendtskab med begrebet pivottabel i Excel uanset.

I del 2 i beviset for, at $O(p)$ er voksende, kan differentiationen laves på forskellige måder, som det måtte passe bedst ind for det konkrete hold: 
* Vha, produktreglen og sammensat
* Vha. kvotientreglen (enten bevist eller blot gennemgået)
* Vha. dobbelt sammensat

I del 4 kan det overvejes, om eleverne selv, evt i gruppe, skal læse udledningen, eller om den skal ske ved lærergennemgang.

I del 5 er det ikke nødvendigt, at eleverne forstår alle detaljer, en rimelig forståelse af ideen kan være tilstrækkelig.

I del 5 kan man godt lade eleverne læse hele afsnittet, men den sidste del er ikke så central, og ligner meget et kendt bevis fra eksponentielle udviklinger.

I del 6 anvendes black-box, men der kan f.eks. sammenlignes med Newton-Raphsons metode til bestemmelse af nulpunkter.

:::